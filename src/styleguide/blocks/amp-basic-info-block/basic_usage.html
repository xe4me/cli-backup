<form [formGroup]="form" class='nl-form p+'>
    <div [amp-block-loader]="childBlocks" [fdn]="fullyDistinguishedName" [form]="form"></div>
</form>

<section class="section">
    <article class="section">
        <h2 class="mb- ml mt+">
            Above is an example of a "Basic Info" block.
        </h2>
        <p class="ml small">
            This block is loaded from a <strong>form-def.def.json</strong> file by the 'amp-block-loader' directive.
            <br>It should be <strong>the default way of loading a block.</strong>.
        </p>
    </article>

    <article class="section">
        <h2 class="mb- ml mt+">Example</h2>
        <p class="para ml">
            In a "form-def.def.json" file, in any array of blocks:
        </p>
        <pre>
            <code syntaxHighlight class="json">
    &#123;
        "name": "basicInfo",
        "blockType": "AmpBasicInfoBlockComponent",
        "blockLayout": "INLINE",
        "commonBlock": true,
        "path": "modules/amp-basic-info-block/components/amp-basic-info-block/amp-basic-info-block.component"
    &#125;
            </code>
        </pre>
    </article>

    <article class="section">
        <h2 class="mb- ml mt+">Default props</h2>
        <pre>
            <code syntaxHighlight class="json">
    &#123;
        "blockTitle": "Tell us about yourself",
        "controls": [
            &#123;
                "id": "title",
                "prepopMapping": "payload.title",
                "prepopMappingParser": "parseTitle"
            &#125;,
            &#123;
                "id": "firstName",
                "prepopMapping": "payload.givenName"
            &#125;,
            &#123;
                "id": "middleName",
                "prepopMapping": "payload.firstMiddleName"
            &#125;,
            &#123;
                "id": "surName",
                "prepopMapping": "payload.familyName"
            &#125;,
            &#123;
                "id": "dateOfBirth",
                "prepopMapping": "payload.birthDate",
                "prepopMappingParser": "parseBirthDate"
            &#125;
        ]
    &#125;
            </code>
        </pre>
    </article>

    <article class="section">
        <h2 class="mb- ml mt+">Prepopulation</h2>
        <p>
            After instantiation, the block will subscribe to a 'login success' event.
            When received, it will call the Customer API and update its
            fields accordingly, hence the 'prepopMapping' and 'prepopMappingParser' properties in the form-def.<br>
            'prepopMapping' indicates where to find the field in the Customer API response payload.<br>
            'prepopMappingParser' allows to apply some transformation. Ex: Change 1949-02-01 to 01/02/1949.
        </p>
    </article>

    <article class="section">
        <h2 class="mb- ml mt+">"custom" section</h2>
        <ul class="bml">
            <li>
                You can override any prop by adding a <strong>"custom.overrides"</strong> object to your block definition. Some examples:
            </li>
        </ul>
        <pre>
            <code syntaxHighlight class="json">
    &#123;
        "custom": &#123;
            "overrides": &#123;
                "blockTitle": "My basic info",
                "controls[3].id": "lastName"
            &#125;
        &#125;
    &#125;
            </code>
        </pre>
        <ul class="bml">
            <li>
                The "Date of birth" field can accept a 'minDate' value:
            </li>
        </ul>
        <pre>
            <code syntaxHighlight class="json">
    &#123;
        "custom": &#123;
            "overrides": &#123;
                "controls[4].minDate": 18
            &#125;
        &#125;
    &#125;
            </code>
        </pre>
        <ul class="bml">
            <li>
                Or you can override everything by providing all of your custom props:
            </li>
        </ul>
        <pre>
            <code syntaxHighlight class="json">
    &#123;
        "blockTitle": "My basic info",
        "controls": [
            &#123;
                "id": "myTitle"
            &#125;,
            &#123;
                "id": "myFirstName"
            &#125;,
            &#123;
                "id": "myMiddleName"
            &#125;,
            &#123;
                "id": "mySurName"
            &#125;,
            &#123;
                "id": "myDateOfBirth"
            &#125;
        ]
    &#125;
            </code>
        </pre>
    </article>
</section>
